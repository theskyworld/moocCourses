### é¡¹ç›®åˆ†æ

![image-20230826080141526](C:\Users\ycx\AppData\Roaming\Typora\typora-user-images\image-20230826080141526.png)

### ä¸šåŠ¡é—­ç¯

é—®å·åˆ›å»ºè€… â†’ æ–°å»ºé—®å· â†’ ç¼–è¾‘é—®å· â†’ å‘å¸ƒé—®å· â†’ é—®å·H5é¡µé¢
   ğŸ‘†                                           â¬‡
åˆ†æç»“æœ   ğŸ‘ˆ  åå°ç»Ÿè®¡å¹¶åˆ†æé¡µé¢  ğŸ‘ˆ ç”¨æˆ·å¡«å†™é¡µé¢å¹¶æäº¤

### é¡¹ç›®ç»„ä»¶åˆ†æ

![image-20230826080407619](C:\Users\ycx\AppData\Roaming\Typora\typora-user-images\image-20230826080407619.png)

### é¡¹ç›®é¡µé¢

![image-20230828141801145](C:\Users\ycx\AppData\Roaming\Typora\typora-user-images\image-20230828141801145.png)

è·¯ç”±è®¾è®¡

- é¦–é¡µ `'/'`
- ç™»å½•é¡µ `'/login'`
- æ³¨å†Œé¡µ `'/register'`
- é—®å·ç®¡ç†
  - æˆ‘çš„é—®å· `'/manage/list'`
  - æ˜Ÿæ ‡é—®å· `'/manage/star'`
  - å›æ”¶ç«™ `'/manage/trash'`
- é—®å·è¯¦æƒ…
  - ç¼–è¾‘é—®å· `/question/edit/:id`
  - é—®å·ç»Ÿè®¡ `/question/stat/:id`
- 404

### API è®¾è®¡

è®¾è®¡æ—¶å¯¹åº”çš„å‰ç«¯éœ€æ±‚

- è·Ÿç”¨æˆ·ç›¸å…³
  - æ³¨å†Œ
  - ç™»å½•
  - è·å–ç”¨æˆ·ä¿¡æ¯
- è·Ÿé—®å·ç›¸å…³
  - åˆ›å»ºé—®å·
  - è·å–å•ä¸ªé—®å·
  - æ›´æ–°é—®å·
  - åˆ é™¤é—®å·
  - æŸ¥è¯¢é—®å·åˆ—è¡¨
  - å¤åˆ¶é—®å·

#### ç”¨æˆ·åŠŸèƒ½

##### è·å–ç”¨æˆ·ä¿¡æ¯

`errno`ä¸ºé”™è¯¯ç¼–å·ï¼Œå…¶å€¼ä¸ºé”™è¯¯ç¼–ç åº“ä¸­å®šä¹‰çš„å€¼

- method `get`
- path `/api/user/info`
- response `{ errno: 0, data: {...} }` æˆ– `{ errno: 10001, msg: 'xxx' }`

##### æ³¨å†Œ

- method `post`
- path `/api/user/register`
- request body `{ username, password, nickname }`
- response `{ errno: 0 }`

##### ç™»å½•

- method `post`
- path `/api/user/login`
- request body `{ username, password }`
- response `{ errno: 0, data: { token } }` â€”â€” **JWT** ä½¿ç”¨ token

#### é—®å·åŠŸèƒ½

##### åˆ›å»ºé—®å·

- method `post`
- path `/api/question`
- request body - æ—  ï¼ˆç‚¹å‡»ä¸€ä¸ªæŒ‰é’®å³å¯åˆ›å»ºï¼Œtitle è‡ªåŠ¨ç”Ÿæˆï¼‰
- response `{ errno: 0, data: { id } }`

##### è·å–å•ä¸ªé—®å·

- method `get`
- path `/api/question/:id`
- response `{ errno: 0, data: { id, title ... } }`

##### è·å–é—®å·åˆ—è¡¨

- method `get`
- path `/api/question-list`
- response: `{ errno: 0, data: { list: [ ... ], total } }`

##### æ›´æ–°é—®å·ä¿¡æ¯

- method `patch`
- path `/api/question/:id`
- request body `{ title, isStar ... }` ï¼ˆä¹‹å‰å¿˜è®°äº†ï¼Œç°è¡¥ä¸Šï¼‰
- response: `{ errno: 0 }`

PSï¼šåˆ é™¤æ˜¯`å‡åˆ é™¤`ï¼Œå®é™…æ˜¯æ›´æ–° `isDeleted` å±æ€§

##### æ‰¹é‡å½»åº•åˆ é™¤é—®å·

- method `delete`
- path `/api/question`
- request body `{ ids: [ ... ] }`
- response: `{ errno: 0 }`

##### å¤åˆ¶é—®å·

- method `post`
- path `/api/question/duplicate/:id`
- response: `{ errno: 0, data: { id } }`

#### å°ç»“

- ä½¿ç”¨ Restful API
- ç”¨æˆ·éªŒè¯ä½¿ç”¨ JWT ï¼ˆåé¢å†è®²ï¼‰
- ç»Ÿä¸€è¿”å›æ ¼å¼ `{ errno, data, msg }`

### ä¸åŒç»„ä»¶ä¹‹é—´è§£è€¦çš„å®ç°

- æœç´¢æ¡†ä¸åˆ—è¡¨å±•ç¤ºç»„ä»¶ä¹‹é—´çš„è§£è€¦ï¼šæœç´¢æ¡†çš„æœç´¢ç»“æœä¸æ—¶æ¥æºäºåˆ—è¡¨å±•ç¤ºç»„ä»¶ä¹‹ä¸­å·²æœ‰æ•°æ®çš„è¿‡æ»¤ç»“æœï¼Œè€Œæ˜¯é€šè¿‡è¾“å…¥æœç´¢å…³é”®å­—ä¹‹åï¼Œå°†å…³é”®å­—ä¿¡æ¯æ·»åŠ åˆ°urlä¸­ï¼Œåˆ°åç«¯è¯·æ±‚åˆ°å¯¹åº”çš„æœç´¢ç»“æœæ•°æ®ã€‚å½“éœ€è¦urlä¸­ç›¸å…³çš„æ•°æ®æ—¶ï¼Œå¯é€šè¿‡`useSearchParams`å‡½æ•°è¿›è¡Œè·å–
- åˆ†é¡µä¸åˆ—è¡¨å±•ç¤ºç»„ä»¶ä¹‹é—´çš„è§£è€¦ï¼šç±»ä¼¼äºæœç´¢æ¡†ï¼Œå°†å½“å‰é¡µæ•°ä¿¡æ¯æ·»åŠ åˆ°urlä¸­ï¼Œå‘åç«¯è¯·æ±‚åˆ°å¯¹åº”é¡µçš„æ•°æ®
- åŒæ—¶æ˜Ÿæ ‡é—®å·å’Œå›æ”¶ç«™ç»„ä»¶ä¸åˆ—è¡¨ç»„ä»¶ä¹‹é—´çš„è§£è€¦ä¹Ÿä¸ä¸Šé¢ç±»ä¼¼ï¼Œå°†`isStar`å’Œ`isDeleted`çš„ä¿¡æ¯ä¼ é€’ç»™åç«¯ï¼Œè¿›è¡Œæ•°æ®çš„è¯·æ±‚
